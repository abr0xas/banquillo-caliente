---
import Layout from '../layouts/Layout.astro';
import CodecScreen from '../components/CodecScreen.astro';
import statusData from '../data/status.json';

const { coach, opponent, status, recentResults } = statusData;

// Icon mapping
const getResultIcon = (result: string) => {
    if (result === 'W') return '‚úÖ'; // Win
    if (result === 'L') return 'üíÄ'; // Loss
    return '‚ö†Ô∏è'; // Draw
};
---

<Layout title="CODEC 140.85: ANCELOTTI STATUS">
	<main class="min-h-screen flex flex-col items-center justify-center p-4">
        
        <CodecScreen 
            coachImage={coach.image}
            coachName="SNAKE (ANCELOTTI)"
            opponentImage={opponent.image}
            opponentName={`RIVAL: ${opponent.name}`}
            statusLevel={status.level}
            coachStartDate={coach.startDate}
        >
            <!-- HUD RESULTS (Overlaid on Image) -->
            <div slot="results-mini" class="flex flex-col gap-0.5">
                {recentResults.map((match) => (
                    <div class="flex items-center gap-1 text-[10px] font-mono">
                        <span class="text-sm">{getResultIcon(match.result)}</span>
                        <span class="text-codec-green">{match.opponent}</span>
                        <span class="text-gray-400">({match.score})</span>
                    </div>
                ))}
            </div>

            <!-- RIVAL RESULTS -->
            <div slot="rival-results" class="flex flex-col gap-0.5">
                {opponent.recentResults.map((match) => (
                    <div class="flex items-center gap-1 text-[10px] font-mono">
                        <span class="text-sm">{getResultIcon(match.result)}</span>
                        <span class="text-codec-green">{match.opponent}</span>
                        <span class="text-gray-400">({match.score})</span>
                    </div>
                ))}
            </div>

            <!-- BOTTOM SUBTITLES (Quote only) -->
            <div slot="subtitles" class="text-center">
                <p class="mb-1 text-codec-green font-bold text-shadow text-lg uppercase tracking-widest leading-none">{status.description}</p>
                <p class="text-xs text-gray-400 font-sans italic">"{status.subtext}"</p>
            </div>
        </CodecScreen>

	</main>
</Layout>

<style>
    .text-shadow {
        text-shadow: 2px 2px 0px #000;
    }
</style>
